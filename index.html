<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Data Explorer</title>
    <script src="data_chunks/games_db_part_1.js"></script>
    <script src="data_chunks/games_db_part_2.js"></script>
    <script src="data_chunks/games_db_part_3.js"></script>
    <script src="data_chunks/games_db_part_4.js"></script>
    <style>
        :root {
            --bg-dark: #121212;
            --bg-panel: #1e1e1e;
            --bg-card: #252525;
            --accent: #bb86fc;
            --accent-dim: rgba(187, 134, 252, 0.1);
            --text-main: #e0e0e0;
            --text-muted: #a0a0a0;
            --border: #333;
            --success: #03dac6;
            --warning: #ffb74d;
        }

        body { font-family: 'Segoe UI', sans-serif; background-color: var(--bg-dark); color: var(--text-main); margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* SCROLLBAR */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-dark); }
        ::-webkit-scrollbar-thumb { background: #444; border-radius: 4px; }

        /* LAYOUT */
        #sidebar { width: 340px; background-color: var(--bg-panel); border-right: 1px solid var(--border); display: flex; flex-direction: column; }
        #main { flex: 1; display: flex; flex-direction: column; overflow: hidden; }

        /* SIDEBAR ITEMS */
        #search-box { padding: 15px; border-bottom: 1px solid var(--border); }
        #search-input { width: 100%; padding: 10px; background: #111; border: 1px solid var(--border); color: white; border-radius: 4px; box-sizing: border-box; }
        
        /* FILTERS */
        .filter-group { padding: 15px; border-bottom: 1px solid var(--border); background: #1a1a1a; }
        .filter-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .filter-label { font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; font-weight: 600; }
        .filter-action { font-size: 0.7rem; color: var(--accent); cursor: pointer; background: none; border: none; padding: 0; }
        .filter-action:hover { text-decoration: underline; }

        /* PLATFORM SEARCH & LIST */
        #platform-search {
            width: 100%;
            padding: 8px;
            background: #252525;
            border: 1px solid var(--border);
            border-bottom: none;
            color: #eee;
            font-size: 0.8rem;
            box-sizing: border-box;
            border-radius: 4px 4px 0 0;
            outline: none;
        }
        #platform-search::placeholder { color: #666; font-style: italic; }
        
        .checkbox-container {
            max-height: 150px;
            overflow-y: auto;
            background: #111;
            border: 1px solid var(--border);
            border-radius: 0 0 4px 4px; /* Bottom corners rounded */
            padding: 5px;
        }
        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 6px 8px;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
            font-size: 0.85rem;
            color: #ccc;
        }
        .checkbox-item:hover { background: #252525; }
        .checkbox-item input { margin-right: 10px; accent-color: var(--accent); cursor: pointer; }
        .checkbox-item.hidden { display: none !important; }

        /* MODERN DATE INPUTS */
        .date-row { display: flex; gap: 10px; }
        .date-col { flex: 1; display: flex; flex-direction: column; gap: 4px; }
        .date-col label { font-size: 0.7rem; color: #777; }
        
        input[type="date"] {
            background: #111;
            border: 1px solid var(--border);
            color: #ddd;
            padding: 8px 10px;
            border-radius: 6px;
            font-family: inherit;
            font-size: 0.85rem;
            width: 100%;
            box-sizing: border-box;
            color-scheme: dark;
            transition: border-color 0.2s;
        }
        input[type="date"]:focus { outline: none; border-color: var(--accent); }
        input[type="date"]::-webkit-calendar-picker-indicator { opacity: 0.6; cursor: pointer; }

        /* Results Count */
        #results-count { padding: 10px 15px; font-size: 0.8rem; color: #666; font-style: italic; border-bottom: 1px solid var(--border); background: var(--bg-panel); }

        #game-list { flex: 1; overflow-y: auto; }
        .game-item { padding: 15px; cursor: pointer; border-bottom: 1px solid var(--border); transition: 0.2s; }
        .game-item:hover { background-color: var(--bg-card); }
        .game-item.active { background-color: var(--accent); color: #000; font-weight: bold; }
        .source-badge { font-size: 0.7em; background: #333; padding: 2px 5px; border-radius: 3px; color: #fff; margin-right: 3px; }

        /* HEADER & TABS */
        #header { padding: 20px 30px; background: var(--bg-panel); border-bottom: 1px solid var(--border); }
        h1 { margin: 0; font-size: 1.8rem; }
        #tabs { display: flex; background: var(--bg-panel); border-bottom: 1px solid var(--border); padding: 0 20px; flex-wrap: wrap; }
        .tab-btn { padding: 15px 20px; background: none; border: none; color: var(--text-muted); cursor: pointer; border-bottom: 3px solid transparent; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; }
        .tab-btn:hover { color: #fff; }
        .tab-btn.active { color: var(--accent); border-bottom-color: var(--accent); }

        /* CONTENT PANELS */
        #panels-container { flex: 1; overflow-y: auto; padding: 30px; scroll-behavior: smooth; }
        .panel { display: none; max-width: 1400px; margin: 0 auto; }
        .panel.active { display: block; }
        
        /* --- VISUAL OVERVIEW STYLES --- */
        .dashboard-grid { display: grid; grid-template-columns: 320px 1fr; gap: 30px; }
        .poster-card { width: 100%; border-radius: 12px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.5); margin-bottom: 20px; }
        .poster-card img { width: 100%; display: block; }
        
        .data-table { width: 100%; border-collapse: collapse; background: var(--bg-card); border-radius: 8px; overflow: hidden; font-size: 0.9rem; margin-bottom: 20px; }
        .data-table th, .data-table td { padding: 12px 15px; text-align: left; border-bottom: 1px solid var(--border); }
        .data-table th { background: #2a2a2a; color: var(--text-muted); font-weight: 600; width: 35%; }
        
        .section-title { font-size: 1.2rem; color: var(--accent); margin-bottom: 15px; border-bottom: 1px solid var(--border); padding-bottom: 5px; margin-top: 5px; }
        
        .stats-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px; margin-bottom: 25px; }
        .stat-card { background: var(--bg-card); padding: 15px; border-radius: 8px; text-align: center; border: 1px solid var(--border); }
        .stat-value { font-size: 1.6rem; font-weight: bold; color: #fff; }
        .stat-label { font-size: 0.8rem; color: var(--text-muted); margin-top: 5px; text-transform: uppercase; }

        .pill-container { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 15px; }
        .pill { background: var(--bg-card); padding: 6px 12px; border-radius: 20px; font-size: 0.85rem; border: 1px solid #333; color: var(--text-muted); }
        .pill.genre { color: var(--success); border-color: rgba(3, 218, 198, 0.2); }
        .pill.platform { color: #fff; background: #333; }
        .pill a { text-decoration: none; color: inherit; }

        /* CREDITS */
        .bfi-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 15px; margin-bottom: 20px; }
        .bfi-card { background: var(--accent-dim); border: 1px solid var(--accent); padding: 15px; border-radius: 8px; display: flex; flex-direction: column; }
        .bfi-role { color: var(--accent); font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; font-weight: 700; margin-bottom: 5px; }
        .bfi-name { font-size: 1.1rem; font-weight: 600; color: #fff; }

        .credits-grid { display: none; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px; margin-top: 15px; }
        .credits-grid.show { display: grid; }
        .credit-item { background: var(--bg-card); padding: 10px; border-radius: 6px; display: flex; flex-direction: column; border: 1px solid var(--border); }
        .credit-role { font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 4px; }
        .credit-name { font-weight: 500; font-size: 0.95rem; }

        .expand-btn { background: var(--bg-card); border: 1px solid var(--border); color: var(--text-main); width: 100%; padding: 12px; border-radius: 6px; cursor: pointer; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; font-size: 0.8rem; transition: 0.2s; }
        .expand-btn:hover { background: #333; color: white; border-color: #555; }
        .expand-btn:after { content: " ▼"; }
        .expand-btn.active:after { content: " ▲"; }

        /* COPY BUTTON */
        .copy-btn { background: #333; color: #fff; border: 1px solid #555; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-size: 0.85rem; display: inline-flex; align-items: center; transition: all 0.2s; }
        .copy-btn:hover { background: #444; border-color: #777; }
        .copy-toolbar { text-align: right; margin-bottom: 10px; }

        .media-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px; }
        .media-item { aspect-ratio: 16/9; background: #000; border-radius: 6px; overflow: hidden; transition: transform 0.2s; }
        .media-item:hover { transform: scale(1.02); }
        .media-item img { width: 100%; height: 100%; object-fit: cover; }

        pre { background: #111; padding: 15px; border-radius: 6px; border: 1px solid #333; overflow-x: auto; color: #a5d6a7; white-space: pre-wrap; word-wrap: break-word; margin-top: 0; }
        .missing-msg { text-align: center; margin-top: 50px; color: var(--text-muted); font-size: 1.2rem; }
    </style>
</head>
<body>

    <div id="sidebar">
        <!-- Search -->
        <div id="search-box">
            <input type="text" id="search-input" placeholder="Search title...">
        </div>
        
        <!-- Platform Checkboxes -->
        <div class="filter-group">
            <div class="filter-header">
                <span class="filter-label">Platforms</span>
                <button class="filter-action" onclick="clearPlatforms()">Clear</button>
            </div>
            
            <!-- Platform Mini Search -->
            <input type="text" id="platform-search" placeholder="Filter platforms...">
            
            <div id="platform-list" class="checkbox-container">
                <!-- Populated via JS -->
            </div>
        </div>

        <!-- Modern Date Filter -->
        <div class="filter-group">
            <div class="filter-header">
                <span class="filter-label">Release Date</span>
                <button class="filter-action" onclick="clearDates()">Reset</button>
            </div>
            <div class="date-row">
                <div class="date-col">
                    <label>From</label>
                    <input type="date" id="filter-date-start">
                </div>
                <div class="date-col">
                    <label>To</label>
                    <input type="date" id="filter-date-end">
                </div>
            </div>
        </div>

        <div id="results-count">Showing all games</div>
        <div id="game-list"></div>
    </div>

    <div id="main">
        <div id="content-wrapper" style="display:none; height: 100%; flex-direction: column;">
            <div id="header">
                <h1 id="game-title">Game Title</h1>
            </div>
            <div id="tabs"></div>
            <div id="panels-container"></div>
        </div>
        
        <div id="empty-state" style="display:flex; justify-content:center; align-items:center; height:100%; color: var(--text-muted);">
            Select a game to view details
        </div>
    </div>

    <script>
        if (typeof window.GAMES_DB === 'undefined') {
            document.body.innerHTML = "<h2 style='color:white; text-align:center; margin-top:50px'>Error: games_db.js not found.</h2>";
        }

        const db = window.GAMES_DB || [];
        
        // DOM Elements
        const gameListEl = document.getElementById('game-list');
        const resultsCountEl = document.getElementById('results-count');
        const searchInput = document.getElementById('search-input');
        const platformSearchInput = document.getElementById('platform-search');
        const platformListEl = document.getElementById('platform-list');
        const filterDateStart = document.getElementById('filter-date-start');
        const filterDateEnd = document.getElementById('filter-date-end');

        const contentWrapper = document.getElementById('content-wrapper');
        const emptyState = document.getElementById('empty-state');
        const titleEl = document.getElementById('game-title');
        const tabsEl = document.getElementById('tabs');
        const panelsContainer = document.getElementById('panels-container');

        // Initialize
        populatePlatformCheckboxes();
        renderGameList(db);

        // --- FILTER LOGIC ---
        
        function populatePlatformCheckboxes() {
            const allPlatforms = new Set();
            db.forEach(game => {
                if(game.sources.combined && game.sources.combined.platforms) {
                    game.sources.combined.platforms.forEach(p => allPlatforms.add(p));
                }
            });
            
            const sorted = Array.from(allPlatforms).sort();
            
            platformListEl.innerHTML = '';
            sorted.forEach(p => {
                const label = document.createElement('label');
                label.className = 'checkbox-item';
                
                const input = document.createElement('input');
                input.type = 'checkbox';
                input.value = p;
                input.className = 'platform-chk';
                input.addEventListener('change', filterGames);

                label.appendChild(input);
                label.appendChild(document.createTextNode(p));
                platformListEl.appendChild(label);
            });
        }

        // Platform Search Listener
        platformSearchInput.addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            const items = document.querySelectorAll('.checkbox-item');
            
            items.forEach(item => {
                const text = item.textContent.toLowerCase();
                if(text.includes(term)) {
                    item.classList.remove('hidden');
                } else {
                    item.classList.add('hidden');
                }
            });
        });

        function clearPlatforms() {
            document.querySelectorAll('.platform-chk').forEach(cb => cb.checked = false);
            platformSearchInput.value = ''; // Clear search too
            // Reset visibility
            document.querySelectorAll('.checkbox-item').forEach(i => i.classList.remove('hidden'));
            filterGames();
        }

        function clearDates() {
            filterDateStart.value = '';
            filterDateEnd.value = '';
            filterGames();
        }

        function filterGames() {
            const term = searchInput.value.toLowerCase();
            const dateStart = filterDateStart.value;
            const dateEnd = filterDateEnd.value;
            
            // Get selected platforms
            const selectedPlatforms = Array.from(document.querySelectorAll('.platform-chk:checked')).map(cb => cb.value);

            const filtered = db.filter(g => {
                // 1. Text Search
                if (!g.display_name.toLowerCase().includes(term)) return false;

                const combined = g.sources.combined || {};
                
                // 2. Platform Filter (OR logic: if ANY selected platform matches)
                if (selectedPlatforms.length > 0) {
                    const gPlatforms = combined.platforms || [];
                    const hasMatch = selectedPlatforms.some(sp => gPlatforms.includes(sp));
                    if (!hasMatch) return false;
                }

                // 3. Date Filter
                if (dateStart || dateEnd) {
                    const gDate = combined.basic_info ? combined.basic_info.release_date : null;
                    if (!gDate) return false; 
                    
                    if (dateStart && gDate < dateStart) return false;
                    if (dateEnd && gDate > dateEnd) return false;
                }

                return true;
            });

            // Update UI count
            resultsCountEl.textContent = `Showing ${filtered.length} of ${db.length} games`;
            renderGameList(filtered);
        }

        // Attach Listeners
        searchInput.addEventListener('input', filterGames);
        filterDateStart.addEventListener('change', filterGames);
        filterDateEnd.addEventListener('change', filterGames);

        // --- RENDERING LOGIC ---

        function renderGameList(games) {
            gameListEl.innerHTML = '';
            
            if(games.length === 0) {
                gameListEl.innerHTML = '<div style="padding:20px; text-align:center; color:gray">No games found</div>';
                return;
            }

            games.forEach(game => {
                const hasCombined = game.sources && game.sources.combined;
                
                const div = document.createElement('div');
                div.className = 'game-item';
                div.innerHTML = `
                    <div>${game.display_name}</div>
                    <div style="margin-top:4px">
                        ${hasCombined ? '<span class="source-badge" style="background:var(--success); color:black">Merged</span>' : ''}
                        ${Object.keys(game.sources).filter(k=>k!=='combined').length} sources
                    </div>
                `;
                div.onclick = () => loadGame(game, div);
                gameListEl.appendChild(div);
            });
        }

        function loadGame(game, clickedEl) {
            document.querySelectorAll('.game-item').forEach(el => el.classList.remove('active'));
            clickedEl.classList.add('active');
            emptyState.style.display = 'none';
            contentWrapper.style.display = 'flex';
            
            titleEl.textContent = game.display_name;
            if(game.sources.combined && game.sources.combined.basic_info && game.sources.combined.basic_info.title){
                 titleEl.textContent = game.sources.combined.basic_info.title;
            }

            renderTabs(game);
        }

        function renderTabs(game) {
            tabsEl.innerHTML = '';
            panelsContainer.innerHTML = '';

            createTab("Visual Overview", true);
            createVisualPanel(game.sources.combined, true);

            const sources = Object.keys(game.sources).sort();
            sources.forEach(sourceKey => {
                let displayName = sourceKey.toUpperCase();
                if(sourceKey === 'combined') displayName = "COMBINED (JSON)";
                
                createTab(displayName, false);
                createRawPanel(displayName, game.sources[sourceKey]);
            });
        }

        function createTab(name, isActive) {
            const btn = document.createElement('button');
            btn.className = `tab-btn ${isActive ? 'active' : ''}`;
            btn.textContent = name;
            btn.dataset.target = name;
            btn.onclick = () => {
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
                btn.classList.add('active');
                const targetPanel = Array.from(document.querySelectorAll('.panel')).find(p => p.dataset.name === name);
                if(targetPanel) targetPanel.classList.add('active');
            };
            tabsEl.appendChild(btn);
        }

        function createVisualPanel(data, isActive) {
            const panel = document.createElement('div');
            panel.className = `panel ${isActive ? 'active' : ''}`;
            panel.dataset.name = "Visual Overview";

            if (!data) {
                panel.innerHTML = `<div class="missing-msg"><p>No merged data found.</p></div>`;
                panelsContainer.appendChild(panel);
                return;
            }

            const info = data.basic_info || {};
            const media = data.media || {};
            const metrics = data.metrics || {};
            const classif = data.classification || {};
            const comps = data.companies || {};
            
            const getVal = (v, suffix='') => v ? `${v}${suffix}` : '<span style="color:#555">-</span>';
            const dateStr = info.release_date || "Unknown Date";

            let html = `
                <div class="dashboard-grid">
                    <div class="dashboard-left">
                        <div class="poster-card">
                            <img src="${media.poster || media.box_art || 'https://via.placeholder.com/300x450?text=No+Image'}" 
                                 onerror="this.src='https://via.placeholder.com/300x450?text=Image+Error'">
                        </div>
                        <table class="data-table">
                            <tr><th>Released</th><td>${dateStr}</td></tr>
                            <tr><th>Rating</th><td>${getVal(classif.content_rating)}</td></tr>
                        </table>
                        <div>
                            <div class="section-title">External Links</div>
                            <div class="pill-container">
                                ${ info.website ? `<span class="pill"><a href="${info.website}" target="_blank">Official Site</a></span>` : '' }
                                ${ info.ids?.imdb ? `<span class="pill"><a href="https://www.imdb.com/title/${info.ids.imdb}" target="_blank">IMDb</a></span>` : '' }
                                ${ info.ids?.rawg ? `<span class="pill"><a href="https://rawg.io/games/${info.ids.rawg}" target="_blank">RAWG</a></span>` : '' }
                                ${ info.ids?.mobygames ? `<span class="pill"><a href="${info.ids.mobygames}" target="_blank">MobyGames</a></span>` : '' }
                            </div>
                        </div>
                        <div style="margin-top:20px;">
                            <div class="section-title">Developers</div>
                            <div class="pill-container">
                                ${ (comps.developers || []).map(d => `<span class="pill">${d}</span>`).join('') || '<span style="color:#666">N/A</span>' }
                            </div>
                        </div>
                         <div>
                            <div class="section-title">Publishers</div>
                            <div class="pill-container">
                                ${ (comps.publishers || []).map(d => `<span class="pill">${d}</span>`).join('') || '<span style="color:#666">N/A</span>' }
                            </div>
                        </div>
                    </div>
                    <div class="dashboard-right">
                        <div style="margin-bottom: 25px;">
                            <p style="font-size: 1.1rem; line-height: 1.6; color: #ddd; margin-top:0;">
                                ${ (info.description || 'No description available.').replace(/\n/g, '<br>') }
                            </p>
                        </div>
                        <div class="stats-row">
                            <div class="stat-card">
                                <div class="stat-value" style="color:#f5c518">${getVal(metrics.rating_imdb)}</div>
                                <div class="stat-label">IMDb Score</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${getVal(metrics.vote_count_imdb)}</div>
                                <div class="stat-label">IMDb Votes</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" style="color:#ff6b6b">${getVal(metrics.rating_rawg)}</div>
                                <div class="stat-label">RAWG Score</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${getVal(metrics.vote_count_rawg)}</div>
                                <div class="stat-label">RAWG Votes</div>
                            </div>
                        </div>
                        <div>
                            <div class="section-title">Genres & Tags</div>
                            <div class="pill-container">
                                ${ (classif.genres || []).map(g => `<span class="pill genre">${g}</span>`).join('') }
                                ${ (classif.tags || []).slice(0, 15).map(t => `<span class="pill">${t}</span>`).join('') }
                            </div>
                        </div>
                        <div>
                            <div class="section-title">Platforms</div>
                            <div class="pill-container">
                                ${ (data.platforms || []).map(p => `<span class="pill platform">${p}</span>`).join('') }
                            </div>
                        </div>
                        ${ renderCredits(data.credits) }
                        ${ renderGallery(media.screenshots) }
                        ${ renderVideos(media.videos) }
                    </div>
                </div>
            `;
            panel.innerHTML = html;
            panelsContainer.appendChild(panel);
        }

        function renderCredits(credits) {
            if (!credits) return '';
            const bfi = credits.bfi_cultural_test_leads || {};
            const roster = credits.roster || [];
            const bfiMap = {
                project_leader: "Project Leader / Director",
                scriptwriter: "Scriptwriter / Narrative",
                composer: "Composer",
                lead_artist: "Lead Artist",
                lead_programmer: "Lead Programmer",
                lead_designer: "Lead Designer"
            };

            let bfiHtml = '';
            let hasBfi = false;
            for (const [key, label] of Object.entries(bfiMap)) {
                if (bfi[key] && bfi[key].length > 0) {
                    hasBfi = true;
                    bfiHtml += `<div class="bfi-card"><span class="bfi-role">${label}</span><span class="bfi-name">${bfi[key].join(', ')}</span></div>`;
                }
            }

            let rosterHtml = '';
            roster.forEach(person => {
                rosterHtml += `<div class="credit-item"><span class="credit-role">${person.role}</span><span class="credit-name">${person.name}</span></div>`;
            });

            let finalHtml = `<div style="margin-top:25px"><div class="section-title">Credits & Crew</div>`;
            if (hasBfi) finalHtml += `<div class="bfi-grid">${bfiHtml}</div>`;
            if (roster.length > 0) {
                const uid = "credits-" + Math.random().toString(36).substr(2, 9);
                finalHtml += `<button class="expand-btn" onclick="toggleCredits('${uid}', this)">Show Full Staff List (${roster.length})</button><div id="${uid}" class="credits-grid">${rosterHtml}</div>`;
            }
            finalHtml += `</div>`;
            return finalHtml;
        }

        function toggleCredits(id, btn) {
            const el = document.getElementById(id);
            if (el.classList.contains('show')) {
                el.classList.remove('show');
                btn.classList.remove('active');
                btn.textContent = btn.textContent.replace("Hide", "Show");
            } else {
                el.classList.add('show');
                btn.classList.add('active');
                btn.textContent = btn.textContent.replace("Show", "Hide");
            }
        }

        function renderGallery(images) {
            if (!images || images.length === 0) return '';
            let html = `<div style="margin-top:30px"><div class="section-title">Gallery</div><div class="media-grid">`;
            images.slice(0, 8).forEach(img => html += `<div class="media-item"><img src="${img}" loading="lazy" onclick="window.open('${img}', '_blank')"></div>`);
            html += `</div></div>`;
            return html;
        }

        function renderVideos(videos) {
            if (!videos || videos.length === 0) return '';
            let html = `<div style="margin-top:20px"><div class="section-title">Videos</div><div style="display:flex; flex-direction:column; gap:10px;">`;
            videos.forEach(v => html += `<a href="${v.url}" target="_blank" style="color:var(--accent); text-decoration:none;">▶ ${v.name || 'Watch Trailer'}</a>`);
            html += `</div></div>`;
            return html;
        }

        function createRawPanel(name, data) {
            const panel = document.createElement('div');
            panel.className = 'panel';
            panel.dataset.name = name;
            
            const toolbar = document.createElement('div');
            toolbar.className = 'copy-toolbar';
            const btn = document.createElement('button');
            btn.className = 'copy-btn';
            btn.textContent = 'Copy JSON';
            const jsonString = JSON.stringify(data, null, 4);
            
            btn.onclick = () => {
                navigator.clipboard.writeText(jsonString).then(() => {
                    btn.textContent = 'Copied!';
                    btn.style.background = 'var(--success)';
                    btn.style.color = '#000';
                    setTimeout(() => { btn.textContent = 'Copy JSON'; btn.style.background = ''; btn.style.color = ''; }, 2000);
                });
            };
            
            toolbar.appendChild(btn);
            panel.appendChild(toolbar);
            const pre = document.createElement('pre');
            pre.textContent = jsonString;
            panel.appendChild(pre);
            panelsContainer.appendChild(panel);
        }
    </script>
</body>
</html>